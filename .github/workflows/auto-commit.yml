# ì›Œí¬í”Œë¡œìš° ì´ë¦„ ì„¤ì • (GitHub Actions í˜ì´ì§€ì— í‘œì‹œë¨)
name: Daily Commit

# ì–¸ì œ ì‹¤í–‰í• ì§€ íŠ¸ë¦¬ê±° ì„¤ì •
on:
  schedule:
    - cron: '0 0 * * *'  # ë§¤ì¼ 00:00 UTCì— ì‹¤í–‰ (í•œêµ­ì‹œê°„ ì˜¤ì „ 9ì‹œ)
  workflow_dispatch:       # GitHub Actions í˜ì´ì§€ì—ì„œ ìˆ˜ë™ ì‹¤í–‰ë„ ê°€ëŠ¥í•˜ê²Œ í•¨

jobs:
  commit:  # ì‘ì—…(Job) ì´ë¦„
    runs-on: ubuntu-latest  # GitHubì˜ Ubuntu ì„œë²„ì—ì„œ ì‹¤í–‰ë¨ (ê°€ìƒí™˜ê²½)

    steps:
      # 1. í˜„ì¬ ì €ì¥ì†Œì˜ ì½”ë“œë¥¼ ì²´í¬ì•„ì›ƒ (ë‹¤ìš´ë¡œë“œ)
      - name: Checkout repository
        uses: actions/checkout@v4

      # 2. Git ì„¤ì • (ì‚¬ìš©ì ì´ë¦„ê³¼ ì´ë©”ì¼ ì…ë ¥)
      #    ì´ ì •ë³´ëŠ” ìë™ ì»¤ë°‹ì„ ë‚¨ê¸¸ ë•Œ ì»¤ë°‹ ì‘ì„±ì ì •ë³´ë¡œ ì‚¬ìš©ë¨
      - name: Set up Git
        run: |
          git config user.name "jeonlyung"
          git config user.email "bindongx2@naver.com"

      # 3. date.txt íŒŒì¼ì„ í˜„ì¬ ë‚ ì§œ/ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸
      #    ë§¤ë²ˆ ì´ íŒŒì¼ ë‚´ìš©ì´ ë‹¬ë¼ì ¸ì•¼ ì»¤ë°‹ì´ ë°œìƒí•¨
      - name: Update date file
        run: |
          echo "Last commit: $(date -u)" > date.txt
          # -u ì˜µì…˜ì€ UTC ê¸°ì¤€ ì‹œê°„ ì¶œë ¥ (ì˜ˆ: 2025-04-17 00:00:00)

      # 4. ë³€ê²½ ì‚¬í•­ì„ ì»¤ë°‹í•˜ê³  push
      - name: Commit changes
        run: |
          git add date.txt  # ë³€ê²½ëœ íŒŒì¼ stage
          git commit -m "ğŸ¤– Auto daily commit on $(date -u)" || echo "No changes to commit"
          # ë³€ê²½ì‚¬í•­ ì—†ìœ¼ë©´ ì»¤ë°‹ ì•ˆ í•˜ê³  ì—ëŸ¬ ë°©ì§€ìš© echo ì‹¤í–‰
          git push  # GitHubë¡œ ì»¤ë°‹ í‘¸ì‹œ
